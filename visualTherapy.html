<!DOCTYPE html>
<html>

<head>
  <title>Visual Therapy Exercise</title>

  <script type="text/javascript">
    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
        vars[key] = value;
      });
      return vars;
    }

    function getRandomizer(min, max) {
      return function () {
        return Math.floor(Math.random() * (1 + max - min)) + min;
      }
    }

    //60,000 / BPM = one beat in milliseconds
    var bpm = getUrlVars()["bpm"] || 40;
    var timeToWait = 60000 / bpm;

    function doExercise(lastId) {
      var idRandomizer = getRandomizer(1, 9);

      var newId = idRandomizer();
      if (lastId) document.getElementById(lastId).style.visibility = "hidden";
      document.getElementById(newId).style.visibility = "visible";
      setTimeout(doExercise.bind(null, newId), timeToWait);
    }

    setTimeout(doExercise, 1000);
  </script>

  <style>
    .lx1 {
      font-size: 250px;
      background-color: white;
      color: red;
      visibility: hidden;
    }
  </style>
</head>

<body>
  <table style="position: absolute; top: 0; bottom: 0; left: 0; right: 0; width:100%; height:100%">
    <tr>
      <th style="width:33%"></th>
      <th style="width:33%"></th>
      <th style="width:33%"></th>
    </tr>
    <tr>
      <td style="text-align:left;">
        <div id="1" class="lx1">&#169;</div>
      </td>
      <td style="text-align:center;">
        <div id="2" class="lx1">&euro;</div>
      </td>
      <td style="text-align:right;">
        <div id="3" class="lx1">&#174;</div>
      </td>
    </tr>
    <tr>
      <td style="text-align:left;">
        <div id="4" class="lx1">&#165;</div>
      </td>
      <td style="text-align:center;">
        <div id="5" class="lx1">&#38;</div>
      </td>
      <td style="text-align:right;">
        <div id="6" class="lx1">&#8227;</div>
      </td>
    </tr>
    <tr>
      <td style="text-align:left;">
        <div id="7" class="lx1">&#920;</div>
      </td>
      <td style="text-align:center;">
        <div id="8" class="lx1">&#926;</div>
      </td>
      <td style="text-align:right;">
        <div id="9" class="lx1">&#936;</div>
      </td>
    </tr>
  </table>
</body>

</html>